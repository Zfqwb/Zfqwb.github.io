

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="nitto">
  <meta name="keywords" content="">
  
  <title>JavaWeb综合案例01 - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/toubudaziji.css">
<link rel="stylesheet" href="/css/gundongtiao.css">
<link rel="stylesheet" href="/css/shubiao.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"zfqwb.github.io","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":21111747,"cnzz":null,"leancloud":{"app_id":"bMWk1sw4iFwEPTeRxqFOkxvq-gzGzoHsz","app_key":"sDMo4aGFa1dFrXYs2oXkNaVY","server_url":"https://bmwk1sw4.lc-cn-n1-shared.com"}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  <meta name="baidu-site-verification" content="code-vbtyv0liY1" />
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>nitto</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="JavaWeb综合案例01">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-05-27 16:55" pubdate>
        2021年5月27日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      11.1k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      175
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">JavaWeb综合案例01</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：1 个月前
                
              </p>
            
            <div class="markdown-body">
              <h1 id="WEB综合案例"><a href="#WEB综合案例" class="headerlink" title="WEB综合案例"></a>WEB综合案例</h1><ol>
<li><p>巩固 web阶段 内容</p>
</li>
<li><p>理解业务</p>
</li>
</ol>
<h2 id="学习目标："><a href="#学习目标：" class="headerlink" title="学习目标："></a>学习目标：</h2><p>目标1：能够说出案例的系统架构和技术架构</p>
<p>目标2：能够说出案例的大致需求</p>
<p>目标3：完成案例工程结构和页面结构的搭建</p>
<p>目标4：完成企业模块相关功能的业务开发</p>
<p>目标5：完成部门模块相关功能的业务开发</p>
<p>目标6：完成用户模块相关功能的业务的开发</p>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><h3 id="1-1-案例介绍"><a href="#1-1-案例介绍" class="headerlink" title="1.1 案例介绍"></a>1.1 案例介绍</h3><p><strong>黑马面面是一款面向程序员的面试刷题系统</strong>，服务于学员培训学习完毕后的复习问题，通过大量刷题，提高企业面试题的熟知度，辅助学员顺利完成求职面试。</p>
<p>注意：我们在本课程中只做黑马面面系统的一部分，对有些功能进行了微缩改造，</p>
<p>黑马面面本原始系统又分为三个子系统：<strong>后台系统，前台系统，手机端</strong>（在本课程中不涉及），以下是各子系统核心的功能介绍</p>
<p><strong>后台系统</strong>：试题的录入</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/0.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/1.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>前台系统</strong>：会员刷题</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/2.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>手机端</strong>：会员刷题（常用/主流）</p>
<h3 id="1-2系统架构"><a href="#1-2系统架构" class="headerlink" title="1.2系统架构"></a>1.2系统架构</h3><p>接下来在做之前，我们就要说说这套案例制作的时候应该采用怎样的一种结构进行搭建？同时采用什么样的技术进行实现。那么首先我们先聊一聊整个项目的系统架构。</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/3.png" srcset="/img/loading.gif" lazyload></p>
<p>对于整个系统来说，它分成两块，一个是后台系统，一个是前台系统。那么我们在访问后台系统的时候，是通过浏览器来进行访问，最终把我们的数据存入到我们的数据库端。记得一点，我们从后台系统录入的题目数据，最终会被前台系统使用，所以说前后台系统，他们在数据这一端上来说是进行共享的。也就是前后台系统用的基础数据是同一组。那么前台系统是通过手机端来进行刷这个题，那么我们在这里边呢，不做手机端的，我们也做浏览器的，这就是它的一个整体的结构，你要先了解。</p>
<p>那么对于后台系统来说，开发的时候，我们采用三层架构的形式开发，分为表现、业务、数据。表现层负责数据的收集以及回显，业务层负责业务逻辑处理，数据层负责与数据库打交道。那么对于前台系统来说呢，它仍然是这样的，只不过他们之间用的技术有差别。那么都有哪些差别呢？接下来咱们就要来说一下技术架构！</p>
<h3 id="1-3-技术架构"><a href="#1-3-技术架构" class="headerlink" title="1.3 技术架构"></a>1.3 技术架构</h3><p>对于后台系统与前台系统，我们分成五个层面来介绍他们的产品。分别是页面端的技术，也就是我们的前端技术了，以及controller、service、Dao、DB。</p>
<p>详情见下图：</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/4.png" srcset="/img/loading.gif" lazyload></p>
<p>AdminLTE：一个前端框架，提供了很多友好的主题样式，动态功能效果，可直接使用，非常方便</p>
<p>POI：数据报表工具，可用于报表导出</p>
<h3 id="1-4-需求分析"><a href="#1-4-需求分析" class="headerlink" title="1.4 需求分析"></a>1.4 需求分析</h3><p>刷题是整个项目的核心功能，那么试题一定是我们的核心。对一道题来说，体型会多种多样，这次我们以最复杂的选择题来演示。选择题一般由题目与选项构成，题目与选项是一对多的关系。在下图中，我们以线和圆点来表述它们之间的关系。没有圆点的是“一”方，有圆点的是“多”方。</p>
<p>继续看，试题一定有归属的学科，比如你Java的同学做python的题，其实意义不大对吧。题目和学科能直产生一对多的关系吗？一个学科下其实分了很多的东西，比如Java下分Java基础、JavaWeb等等，所以在学科和试题建，需要有个目录。</p>
<p>假如你现在想去一个企业，是不想想看看这个企业以前都出些什么面试题呀。那就需要一个企业的模块了。一个企业与试题之间，也是一对多的关系。</p>
<p>试题是谁录入系统呢？需要有用户模块，那肯定是操作系统的人，对于这个用户来说，并不是所有人都能录入，所以需要约定一个部门。然后，那是部门中所有人都需要录入么？这样就涉及到了一个权限的问题了，我们说你这个用户有一种角色，就能拥有录入试题的权限！所以在用户与角色之间形成一个多对多的关系。</p>
<p>这个人分配角色了就能录试题了吗？不，还需要一个叫模块的东西。就是这个系统中一共有多少种操作？在我们系统中有一个模块叫做录入试题的模块，有一个模块叫审核试题的模块，是这个角色能操作这个模块儿，所以这个用户才能执行这项操作。模块与角色之间也是一个多对多的关系。</p>
<p>录入完了就能直接用么？不能，万一你录的题有问题呢？所以一定要有一个审核机制。对于所有的操作，我们都需要有一个日志来记录了，所以还要有一个日志的东西。</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/5.png" srcset="/img/loading.gif" lazyload></p>
<p>接下来要开始答题 ，那谁来答题呢？，会员。所以我们要有一个会员的模块。会员就直接做题吗？，做题应该是以试卷的形式呈现。作为一个会员，登录以后，你要去做一套卷子，而不是做一道题，当然你说能不能做单个题，可以，可以把单个题理解为这个试卷就一道题。会员与试卷是一对多的关系。</p>
<p>那试卷就与我们的试题直接产生关系么，不需要。我们每一个试卷生成以后。都需要把这个题给做出来，你做出来以后，除了有题目以外，试卷中还得有你做题的答案。所以说试卷中会保存一个试卷的答题明细，这个地方试卷对答题明细是一个一对多的关系。其实答题明细中本身就有试题的ID，因此我们这里用试卷与答题明细对试题进行关联。</p>
<p>总结一下，左边这块是属于后台系统，负责保障录入试题的。右边这块属于前台系统，负责学员的刷题功能。</p>
<h3 id="1-5-课程计划安排"><a href="#1-5-课程计划安排" class="headerlink" title="1.5 课程计划安排"></a>1.5 课程计划安排</h3><p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/6.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2-环境搭建"><a href="#2-环境搭建" class="headerlink" title="2. 环境搭建"></a>2. 环境搭建</h2><h3 id="2-1-工程结构搭建"><a href="#2-1-工程结构搭建" class="headerlink" title="2.1 工程结构搭建"></a>2.1 工程结构搭建</h3><p>创建工程的要求，及注意点：</p>
<ul>
<li>创建maven工程（web工程）</li>
</ul>
<ul>
<li>导入项目依赖的坐标（资源）</li>
</ul>
<ul>
<li>补全目录结构</li>
</ul>
<blockquote>
<p>web</p>
<p>​    |—–src</p>
<p>​           |——-main</p>
<p>​                  |————java</p>
<p>​                          |————resources</p>
<p>​                              |————webapp</p>
<p>​                |——-test</p>
<p>​                  |————-java</p>
<p>​                  |————-resources</p>
</blockquote>
<ul>
<li>创建三层架构开发的包层次结构</li>
</ul>
<ul>
<li>创建三层架构开发的包层次结构</li>
</ul>
<blockquote>
<p>domain</p>
<p>dao</p>
<p>service</p>
<p>web</p>
<p>​       controller</p>
<p>​    filters</p>
<p>utils</p>
<p>factory</p>
</blockquote>
<p>1：创建项目：mm</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>2：在pom.xml文件中添加相关坐标：</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--mybatis_--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--分页插件--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--mysql--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.46<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--druid数据源--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.21<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--junit--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- servlet3.0 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--jsp--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--bean-utils--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-beanutils<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-beanutils<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--apache工具包--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--jstl--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--jackson--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-annotations<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--文件上传--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--POI--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.poi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>poi<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.poi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>poi-ooxml<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.poi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>poi-ooxml-schemas<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--tomcat插件--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>80<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>3：创建相关目录结构，包结构，如下</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/7.png" srcset="/img/loading.gif" lazyload></p>
<p>删除：web.xml</p>
<p>4：启动初始项目，运行查看！</p>
<p>5：从今日课程资料——–&gt;工程资源文件中找到项目数据库脚本，导入到mysql数据库，创建好相关的库表结构</p>
<h3 id="2-2-页面结构搭建"><a href="#2-2-页面结构搭建" class="headerlink" title="2.2 页面结构搭建"></a>2.2 页面结构搭建</h3><p>管理后台一般有着固定的页面构建模式，我们可以进行快速构建</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/8.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>AdminLTE是一款建立在bootstrap和jquery之上的开源模板主题工具，其中内置了多个模板页面，可以用于快速创建响应式Html5网站，并免去了书写大量的 CSS 与 JS 的工作</li>
<li>黑马程序员研究院对AdminLTE进行了汉化，并改良了个别功能，方便学员学习使用</li>
</ul>
<p>从今日课程资料中找到：模块页面———-&gt;案例结构页面———–&gt;导入到项目的webapp目录下，如果有文件需要覆盖则选择覆盖，</p>
<p>导入完成后可以启动项目进行查看</p>
<p>由AdminLTE构建的网站后台的整体页面布局如下：</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/9.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="3-企业模块"><a href="#3-企业模块" class="headerlink" title="3. 企业模块"></a>3. 企业模块</h2><p>我们选择一个单表的增删改查功能来进行入门，熟悉开发的模式和流程，因此选择企业模块</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/10.png" srcset="/img/loading.gif" lazyload></p>
<p>要对企业信息做CRUD，我们需要知道要操作企业的那些字段，</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/11.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-1-数据层开发"><a href="#3-1-数据层开发" class="headerlink" title="3.1 数据层开发"></a>3.1 数据层开发</h3><p>1：创建实体：com.itheima.domain.store.Company</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Company</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> String id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Date expirationDate;<br>    <span class="hljs-keyword">private</span> String address;<br>    <span class="hljs-keyword">private</span> String licenseId;<br>    <span class="hljs-keyword">private</span> String representative;<br>    <span class="hljs-keyword">private</span> String phone;<br>    <span class="hljs-keyword">private</span> String companySize;<br>    <span class="hljs-keyword">private</span> String industry;<br>    <span class="hljs-keyword">private</span> String remarks;<br>    <span class="hljs-keyword">private</span> Integer state;<br>    <span class="hljs-keyword">private</span> String city;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(String id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getExpirationDate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> expirationDate;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setExpirationDate</span><span class="hljs-params">(Date expirationDate)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.expirationDate = expirationDate;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(String address)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.address = address;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getLicenseId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> licenseId;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setLicenseId</span><span class="hljs-params">(String licenseId)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.licenseId = licenseId;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getRepresentative</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> representative;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRepresentative</span><span class="hljs-params">(String representative)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.representative = representative;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPhone</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> phone;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPhone</span><span class="hljs-params">(String phone)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.phone = phone;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getCompanySize</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> companySize;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCompanySize</span><span class="hljs-params">(String companySize)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.companySize = companySize;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getIndustry</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> industry;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setIndustry</span><span class="hljs-params">(String industry)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.industry = industry;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getRemarks</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> remarks;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRemarks</span><span class="hljs-params">(String remarks)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.remarks = remarks;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setState</span><span class="hljs-params">(Integer state)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getCity</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> city;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCity</span><span class="hljs-params">(String city)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.city = city;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>2：创建dao：com.itheima.dao.store.CompanyDao</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CompanyDao</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">save</span><span class="hljs-params">(Company company)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delete</span><span class="hljs-params">(Company company)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">update</span><span class="hljs-params">(Company company)</span></span>;<br><br>    <span class="hljs-function">Company <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span></span>;<br><br>    <span class="hljs-function">List&lt;Company&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>3：从今日课程资料中找到：dao层资源文件———拷贝配置文件下的资源到项目resources目录下</p>
<p>4：在项目resources目录下创建一个目录：com\itheima\dao\store，然后把CompanyDao.xml配置文件放到该目录中</p>
<p>5：从今日课程资料中找到：dao层资源文件———-拷贝工具类下的资源到项目中的utils包和factory包下；注意别放错位置</p>
<p><strong>总结</strong>：</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/12.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-2-业务层开发"><a href="#3-2-业务层开发" class="headerlink" title="3.2 业务层开发"></a>3.2 业务层开发</h3><p>业务层基础功能：</p>
<p>增</p>
<p>删</p>
<p>改</p>
<p>查单个</p>
<p>查全部</p>
<p>分页查（分页插件）</p>
<p>我们依次来实现</p>
<p>1：创建业务层接口：com.itheima.service.store.CompanyService</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CompanyService</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 添加</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> company</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Company company)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> company</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(Company company)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 修改</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> company</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Company company)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询单个</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 查询的条件（id）</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 查询的结果，单个对象</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">Company <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询全部的数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 全部数据的列表对象</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">List&lt;Company&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page 页码</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> size 每页显示的数据总量</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">PageInfo <span class="hljs-title">findAll</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page,<span class="hljs-keyword">int</span> size)</span></span>;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>2：创建业务层实现类：com.itheima.service.store.impl.CompanyServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CompanyServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CompanyService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Company company)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            CompanyDao companyDao = MapperFactory.getMapper(sqlSession,CompanyDao.class);<br>            <span class="hljs-comment">//id使用UUID的生成策略来获取</span><br>            String id = UUID.randomUUID().toString();<br>            company.setId(id);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            companyDao.save(company);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(Company company)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            CompanyDao companyDao = MapperFactory.getMapper(sqlSession,CompanyDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            companyDao.delete(company);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Company company)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            CompanyDao companyDao = MapperFactory.getMapper(sqlSession,CompanyDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            companyDao.update(company);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Company <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            CompanyDao companyDao = MapperFactory.getMapper(sqlSession,CompanyDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            <span class="hljs-keyword">return</span> companyDao.findById(id);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Company&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            CompanyDao companyDao = MapperFactory.getMapper(sqlSession,CompanyDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            <span class="hljs-keyword">return</span> companyDao.findAll();<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> PageInfo <span class="hljs-title">findAll</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            CompanyDao companyDao = MapperFactory.getMapper(sqlSession,CompanyDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            PageHelper.startPage(page,size);<br>            List&lt;Company&gt; all = companyDao.findAll();<br>            PageInfo pageInfo = <span class="hljs-keyword">new</span> PageInfo(all);<br>            <span class="hljs-keyword">return</span> pageInfo;<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>3：创建测试类，对业务层方法依次测试，在测试包下创建：com.itheima.service.store.CompanyServiceTest</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CompanyServiceTest</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompanyService companyService = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-meta">@BeforeClass</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>        companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSave</span><span class="hljs-params">()</span></span>&#123;<br>        Company company = <span class="hljs-keyword">new</span> Company();<br>        company.setName(<span class="hljs-string">&quot;测试数据&quot;</span>);<br>        companyService.save(company);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testFindAll</span><span class="hljs-params">()</span></span>&#123;<br>        PageInfo all = companyService.findAll(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>);<br>        System.out.println(all);<br>    &#125;<br><br>    <span class="hljs-meta">@AfterClass</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destory</span><span class="hljs-params">()</span></span>&#123;<br>        companyService = <span class="hljs-keyword">null</span>;<br>    &#125;<br><br><br>&#125;<br></code></pre></div></td></tr></table></figure>



<h3 id="3-3-表现层列表功能"><a href="#3-3-表现层列表功能" class="headerlink" title="3.3 表现层列表功能"></a>3.3 表现层列表功能</h3><p>功能分析：</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/13.png" srcset="/img/loading.gif" lazyload></p>
<p>1：在今日课程资料中找到：模块页面———&gt;company下的所有页面—–&gt;拷贝并添加到项目<code>webapp\pages\store\company</code>目录下，当然后两级目录需要自己新建</p>
<p>2：在<code>webapp/pages/home/aside.jsp</code>中找到企业管理，修改对应的连接为<code>$&#123;ctx&#125;/pages/store/company/list.jsp</code></p>
<p>3：在项目中创建目录：<code>webapp/pages/common</code>，从今日课程给大家提供的模块页面中找到：公共页面，将里面的jsp拷贝到刚刚创建好的common目录中</p>
<p>4：创建Servlet：com.itheima.web.controller.store.company.CompanyServlet</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// uri:/store/company?operation=list</span><br><span class="hljs-meta">@WebServlet(&quot;/store/company&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CompanyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>            CompanyService companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>            PageInfo all = companyService.findAll(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>);<br>            <span class="hljs-comment">//将数据保存到指定的位置</span><br>            request.setAttribute(<span class="hljs-string">&quot;page&quot;</span>,all);<br>            <span class="hljs-comment">//跳转页面</span><br>            request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/list.jsp&quot;</span>).forward(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">this</span>.doGet(request,response);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>5：将项目webapp下的pages目录拷贝到WEB-INF目录，并删除home目录，然后删除原本webapp/pages目录下的common及store目录</p>
<p>6：找到<code>webapp/pages/home/aside.jsp</code>中的企业管理，修改连接为<code>$&#123;ctx&#125;/store/company?operation=list</code></p>
<p>7：在页面中进行数据渲染，找到<code>WEB-INF/pages/store/compay/list.jsp</code>，填充数据区，注意页面中已经写好了</p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsp">&lt;!--数据列表--&gt;<br>&lt;table id=<span class="hljs-string">&quot;dataList&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;table table-bordered table-striped table-hover dataTable&quot;</span>&gt;<br>    &lt;thead&gt;<br>        &lt;tr&gt;<br>            &lt;th <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;&quot;</span> style=<span class="hljs-string">&quot;padding-right:0px;&quot;</span>&gt;<br><br>            &lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;企业名称&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;所在地&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;地址&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;企业法人&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;联系方式&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;所属行业&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;状态&lt;/th&gt;<br>            &lt;th class=&quot;text-center&quot;&gt;操作&lt;/th&gt;<br>        &lt;/tr&gt;<br>    &lt;/thead&gt;<br>    &lt;tbody&gt;<br>        &lt;c:forEach items=<span class="hljs-string">&quot;$&#123;page.list&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;<br>            &lt;tr&gt;<br>                &lt;td&gt;&lt;input name=&quot;ids&quot; value=&quot;$&#123;item.id&#125;&quot; type=&quot;checkbox&quot;&gt;&lt;/td&gt;<br>                &lt;td&gt;<br>                    $&#123;item.name&#125;<br>                &lt;/td&gt;<br>                &lt;td&gt;$&#123;item.city&#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;item.address&#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;item.representative&#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;item.phone&#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;item.industry&#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;item.state ==0?&#x27;未审核&#x27;:&#x27;已审核&#x27;&#125;&lt;/td&gt;<br>                &lt;td <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;text-center&quot;</span>&gt;<br>                    &lt;button type=&quot;button&quot; class=&quot;btn bg-olive btn-xs&quot; onclick=&#x27;location.href=&quot;$&#123;ctx&#125;/store/company?operation=toEdit&amp;id=$&#123;item.id&#125;&quot;&#x27;&gt;编辑&lt;/button&gt;<br>                &lt;/td&gt;<br>            &lt;/tr&gt;<br>        &lt;/c:forEach&gt;<br>    &lt;/tbody&gt;<br>&lt;/table&gt;<br></code></pre></div></td></tr></table></figure>

<p>8：优化doGost方法，添加分页控制</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>        CompanyService companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>        <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> size = <span class="hljs-number">5</span>;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>)))&#123;<br>            page = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>));<br>        &#125;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>)))&#123;<br>            size = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>));<br>        &#125;<br>        PageInfo all = companyService.findAll(page, size);<br>        <span class="hljs-comment">//将数据保存到指定的位置</span><br>        request.setAttribute(<span class="hljs-string">&quot;page&quot;</span>,all);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/list.jsp&quot;</span>).forward(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="3-4-表现层添加功能"><a href="#3-4-表现层添加功能" class="headerlink" title="3.4 表现层添加功能"></a>3.4 表现层添加功能</h3><p>1：为了应对更多的方法，我们进行方法抽取</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// uri:/store/company?operation=list</span><br><span class="hljs-meta">@WebServlet(&quot;/store/company&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CompanyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.list(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toAdd&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toAdd(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;save&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.save(request, response);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">list</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//进入列表页</span><br>        <span class="hljs-comment">//获取数据</span><br>        CompanyService companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>        <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> size = <span class="hljs-number">5</span>;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>)))&#123;<br>            page = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>));<br>        &#125;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>)))&#123;<br>            size = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>));<br>        &#125;<br>        PageInfo all = companyService.findAll(page, size);<br>        <span class="hljs-comment">//将数据保存到指定的位置</span><br>        request.setAttribute(<span class="hljs-string">&quot;page&quot;</span>,all);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/list.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toAdd</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/add.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>      <br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">this</span>.doGet(request,response);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>2：编辑<code>/WEB-INF/pages/store/company/add.jsp</code>页面（无需修改）</p>
<p>3：从课程资料中找到：web层资源文件，在里面找到：<code>BeanUtil.java</code>拷贝到项目utils包下</p>
<p>4：编写save方法，完成数据的保存</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>    Company company = BeanUtil.fillBean(request,Company.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>    <span class="hljs-comment">//调用业务层接口save</span><br>    CompanyService companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>    companyService.save(company);<br>    <span class="hljs-comment">//跳转回到页面list</span><br>    <span class="hljs-comment">//list(request,response);</span><br>    response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/store/company?operation=list&quot;</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="3-5-表现层删除修改功能"><a href="#3-5-表现层删除修改功能" class="headerlink" title="3.5 表现层删除修改功能"></a>3.5 表现层删除修改功能</h3><p>修改和保存差异不大，一个是做save，一个是做update，</p>
<p>1：在doGet方法添加去到修改页面和真正修改的两个方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.list(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toAdd&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.toAdd(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;save&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.save(request, response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toEdit&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.toEdit(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;edit&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.edit(request,response);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toEdit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//查询要修改的数据findById</span><br>        String id = request.getParameter(<span class="hljs-string">&quot;id&quot;</span>);<br>        CompanyService companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>        Company company = companyService.findById(id);<br>        <span class="hljs-comment">//将数据加载到指定区域，供页面获取</span><br>        request.setAttribute(<span class="hljs-string">&quot;company&quot;</span>,company);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/update.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">edit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Company company = BeanUtil.fillBean(request,Company.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br>        CompanyService companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>        companyService.update(company);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/store/company?operation=list&quot;</span>);<br>    &#125;<br></code></pre></div></td></tr></table></figure>

<p>2：删除功能后台相对简单，主要是前台对要删除数据的id如何获取，对于后台，在doGet方法中添加对删除操作的判断，并添加删除方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.list(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toAdd&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.toAdd(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;save&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.save(request, response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toEdit&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.toEdit(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;edit&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.edit(request,response);<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;delete&quot;</span>.equals(operation))&#123;<br>        <span class="hljs-keyword">this</span>.delete(request,response);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>    Company company = BeanUtil.fillBean(request,Company.class);<br>    <span class="hljs-comment">//调用业务层接口save</span><br>    <span class="hljs-comment">//        CompanyService companyService = new CompanyServiceImpl();</span><br>    companyService.delete(company);<br>    <span class="hljs-comment">//跳转回到页面list</span><br>    <span class="hljs-comment">//list(request,response);</span><br>    response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/store/company?operation=list&quot;</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>



<p>3：代码优化，在所有的操作方法中我们要调用业务层，我们都要去创建业务层对象，每个方法中都去创建略显复杂，怎么办？</p>
<p>创建一个BaseServlet：com.itheima.web.controller.BaseServlet</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-keyword">protected</span> CompanyService companyService;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>4：修改<code>CompanyServlet</code>让其继承自<code>BaseServlet</code>，然后在各个方法中注释掉业务层对象创建的代码，完整的<code>CompanyServlet</code>如下</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// uri:/store/company?operation=list</span><br><span class="hljs-meta">@WebServlet(&quot;/store/company&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CompanyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseServlet</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.list(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toAdd&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toAdd(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;save&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.save(request, response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toEdit&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toEdit(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;edit&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.edit(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;delete&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.delete(request,response);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">list</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//进入列表页</span><br>        <span class="hljs-comment">//获取数据</span><br><span class="hljs-comment">//        CompanyService companyService = new CompanyServiceImpl();</span><br>        <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> size = <span class="hljs-number">5</span>;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>)))&#123;<br>            page = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>));<br>        &#125;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>)))&#123;<br>            size = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>));<br>        &#125;<br>        PageInfo all = companyService.findAll(page, size);<br>        <span class="hljs-comment">//将数据保存到指定的位置</span><br>        request.setAttribute(<span class="hljs-string">&quot;page&quot;</span>,all);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/list.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toAdd</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/add.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Company company = BeanUtil.fillBean(request,Company.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br><span class="hljs-comment">//        CompanyService companyService = new CompanyServiceImpl();</span><br>        companyService.save(company);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/store/company?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toEdit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//查询要修改的数据findById</span><br>        String id = request.getParameter(<span class="hljs-string">&quot;id&quot;</span>);<br><span class="hljs-comment">//        CompanyService companyService = new CompanyServiceImpl();</span><br>        Company company = companyService.findById(id);<br>        <span class="hljs-comment">//将数据加载到指定区域，供页面获取</span><br>        request.setAttribute(<span class="hljs-string">&quot;company&quot;</span>,company);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/store/company/update.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">edit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Company company = BeanUtil.fillBean(request,Company.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br><span class="hljs-comment">//        CompanyService companyService = new CompanyServiceImpl();</span><br>        companyService.update(company);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/store/company?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Company company = BeanUtil.fillBean(request,Company.class);<br>        <span class="hljs-comment">//调用业务层接口save</span><br><span class="hljs-comment">//        CompanyService companyService = new CompanyServiceImpl();</span><br>        companyService.delete(company);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/store/company?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">this</span>.doGet(request,response);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h2 id="4-部门模块"><a href="#4-部门模块" class="headerlink" title="4. 部门模块"></a>4. 部门模块</h2><p>对于部门，我们要弄清楚的部门的结构</p>
<p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/14.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="4-1-部门模块单表开发"><a href="#4-1-部门模块单表开发" class="headerlink" title="4.1 部门模块单表开发"></a>4.1 部门模块单表开发</h3><p>1：创建实体：com.itheima.domain.system.Dept</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dept</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String id;<br>    <span class="hljs-keyword">private</span> String deptName;<br>    <span class="hljs-keyword">private</span> String parentId;<br>    <span class="hljs-keyword">private</span> Integer state;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(String id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getDeptName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> deptName;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDeptName</span><span class="hljs-params">(String deptName)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.deptName = deptName;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getParentId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> parentId;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setParentId</span><span class="hljs-params">(String parentId)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.parentId = parentId;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setState</span><span class="hljs-params">(Integer state)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.state = state;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>2：在<code>src/main/resources</code>下创建目录<code>com/itheima/dao/system</code>，找到课程资料的<code>dao层资源文件\配置文件\DeptDao.xml</code>，拷贝到该目录下</p>
<p>3：创建dao接口：com.itheima.dao.system.DeptDao</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DeptDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">save</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delete</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">update</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-function">Dept <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span></span>;<br><br>    <span class="hljs-function">List&lt;Dept&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>4：创建业务层接口：com.itheima.service.system.DeptService</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DeptService</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 添加</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 修改</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询单个</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 查询的条件（id）</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 查询的结果，单个对象</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">Dept <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询全部的数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 全部数据的列表对象</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">List&lt;Dept&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page 页码</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> size 每页显示的数据总量</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">PageInfo <span class="hljs-title">findAll</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>5：创建业务层实现类：com.itheima.service.system.impl.DeptServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">DeptService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            DeptDao deptDao = MapperFactory.getMapper(sqlSession,DeptDao.class);<br>            <span class="hljs-comment">//id使用UUID的生成策略来获取</span><br>            String id = UUID.randomUUID().toString();<br>            dept.setId(id);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            deptDao.save(dept);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            DeptDao deptDao = MapperFactory.getMapper(sqlSession,DeptDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            deptDao.delete(dept);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            DeptDao deptDao = MapperFactory.getMapper(sqlSession,DeptDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            deptDao.update(dept);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            DeptDao deptDao = MapperFactory.getMapper(sqlSession,DeptDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            <span class="hljs-keyword">return</span> deptDao.findById(id);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            DeptDao deptDao = MapperFactory.getMapper(sqlSession,DeptDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            <span class="hljs-keyword">return</span> deptDao.findAll();<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> PageInfo <span class="hljs-title">findAll</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            DeptDao deptDao = MapperFactory.getMapper(sqlSession,DeptDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            PageHelper.startPage(page,size);<br>            List&lt;Dept&gt; all = deptDao.findAll();<br>            PageInfo pageInfo = <span class="hljs-keyword">new</span> PageInfo(all);<br>            <span class="hljs-keyword">return</span> pageInfo;<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>6：创建Servlet：com.itheima.web.controller.system.DeptServlet</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// uri:/system/dept?operation=list</span><br><span class="hljs-meta">@WebServlet(&quot;/system/dept&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseServlet</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.list(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toAdd&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toAdd(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;save&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.save(request, response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toEdit&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toEdit(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;edit&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.edit(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;delete&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.delete(request,response);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">list</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//进入列表页</span><br>        <span class="hljs-comment">//获取数据</span><br>        <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> size = <span class="hljs-number">5</span>;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>)))&#123;<br>            page = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>));<br>        &#125;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>)))&#123;<br>            size = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>));<br>        &#125;<br>        PageInfo all = deptService.findAll(page, size);<br>        <span class="hljs-comment">//将数据保存到指定的位置</span><br>        request.setAttribute(<span class="hljs-string">&quot;page&quot;</span>,all);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/dept/list.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toAdd</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/dept/add.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Dept dept = BeanUtil.fillBean(request,Dept.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br><span class="hljs-comment">//        DeptService deptService = new DeptServiceImpl();</span><br>        deptService.save(dept);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/system/dept?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toEdit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//查询要修改的数据findById</span><br>        String id = request.getParameter(<span class="hljs-string">&quot;id&quot;</span>);<br><span class="hljs-comment">//        DeptService deptService = new DeptServiceImpl();</span><br>        Dept dept = deptService.findById(id);<br>        <span class="hljs-comment">//将数据加载到指定区域，供页面获取</span><br>        request.setAttribute(<span class="hljs-string">&quot;dept&quot;</span>,dept);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/dept/update.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">edit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Dept dept = BeanUtil.fillBean(request,Dept.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br><span class="hljs-comment">//        DeptService deptService = new DeptServiceImpl();</span><br>        deptService.update(dept);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/system/dept?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        Dept dept = BeanUtil.fillBean(request,Dept.class);<br>        <span class="hljs-comment">//调用业务层接口save</span><br><span class="hljs-comment">//        DeptService deptService = new DeptServiceImpl();</span><br>        deptService.delete(dept);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        <span class="hljs-comment">//list(request,response);</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/system/dept?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">this</span>.doGet(request,response);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>7：在BaseServlet中添加新的代码，如下</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-keyword">protected</span> CompanyService companyService;<br>    <span class="hljs-keyword">protected</span> DeptService deptService;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>        deptService = <span class="hljs-keyword">new</span> DeptServiceImpl();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>8：创建目录<code>WEB-INF/pages/system/dept</code>，从<code>WEB-INF/pages/store/company/</code>下拷贝<code>add.jsp,list.jsp,update.jsp</code>到该目录中</p>
<p>9：调整上述拷贝过来的<code>list.jsp</code>，修改数据表格部分</p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsp">&lt;!--数据列表--&gt;<br>&lt;table id=<span class="hljs-string">&quot;dataList&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;table table-bordered table-striped table-hover dataTable&quot;</span>&gt;<br>    &lt;thead&gt;<br>        &lt;tr&gt;<br>            &lt;th <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;&quot;</span> style=<span class="hljs-string">&quot;padding-right:0px;&quot;</span>&gt;<br>                &lt;input type=<span class="hljs-string">&quot;checkbox&quot;</span> name=<span class="hljs-string">&quot;selid&quot;</span> onclick=<span class="hljs-string">&quot;checkAll(&#x27;id&#x27;,this)&quot;</span>&gt;<br>            &lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;部门名称&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;所属部门&lt;/th&gt;<br>            &lt;th class=&quot;sorting&quot;&gt;状态&lt;/th&gt;<br>            &lt;th class=&quot;text-center&quot;&gt;操作&lt;/th&gt;<br>        &lt;/tr&gt;<br>    &lt;/thead&gt;<br>    &lt;tbody&gt;<br>        &lt;c:forEach items=<span class="hljs-string">&quot;$&#123;page.list&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;dept&quot;</span>&gt;<br>            &lt;tr&gt;<br>                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;id&quot; value=&quot;$&#123;dept.id &#125;&quot;/&gt;&lt;/td&gt;<br>                &lt;td&gt;$&#123;dept.deptName &#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;dept.parent.deptName &#125;&lt;/td&gt;<br>                &lt;td&gt;$&#123;dept.state ==0?&#x27;未启用&#x27;:&#x27;使用中&#x27;&#125;&lt;/td&gt;<br>                &lt;th <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;text-center&quot;</span>&gt;<br>                    &lt;button type=&quot;button&quot; class=&quot;btn bg-olive btn-xs&quot; onclick=&#x27;location.href=&quot;$&#123;ctx&#125;/system/dept?operation=toEdit&amp;id=$&#123;dept.id&#125;&quot;&#x27;&gt;编辑&lt;/button&gt;<br>                &lt;/th&gt;<br>            &lt;/tr&gt;<br>        &lt;/c:forEach&gt;<br>    &lt;/tbody&gt;<br>&lt;/table&gt;<br></code></pre></div></td></tr></table></figure>

<p>了解了如何去修改这些页面后，为方便我们的开发：从今日的课程资料中找到：<code>模块页面\dept</code>下的所有页面，用他们替换<code>WEB-INF/pages/system/dept</code>下的这些页面即可</p>
<h3 id="4-2-部门自连接"><a href="#4-2-部门自连接" class="headerlink" title="4.2 部门自连接"></a>4.2 部门自连接</h3><p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/15.png" srcset="/img/loading.gif" lazyload></p>
<p>1：在实体中添加自关联的字段，parent</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dept</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String id;<br>    <span class="hljs-keyword">private</span> String deptName;<br>    <span class="hljs-keyword">private</span> String parentId;<br>    <span class="hljs-keyword">private</span> Integer state;<br><br>    <span class="hljs-keyword">private</span> Dept parent;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">getParent</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> parent;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setParent</span><span class="hljs-params">(Dept parent)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.parent = parent;<br>    &#125;<br><br>    <span class="hljs-comment">//-------其他get/set方法略</span><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>2：修改映射配置，找到<code>src/main/resources/com/itheima/dao/system/DeptDao.xml</code>，添加关联映射</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置实体类属性和数据库表中列的对应关系--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.itheima.domain.system.Dept&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_name&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptName&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;parent_id&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;parentId&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;state&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;DECIMAL&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;state&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--关联关系--&gt;</span><br>    &lt;association<br>                 property=&quot;parent&quot;<br>                 javaType=&quot;com.itheima.domain.system.Dept&quot;<br>                 column=&quot;parent_id&quot;<br>                 select=&quot;com.itheima.dao.system.DeptDao.findById&quot;<br>                 /&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>3：新建的时候要查询所有部门数据，装载到页面上</p>
<p>找到：DeptServlet中的toAdd方法，添加查询部门信息的代码</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toAdd</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">//加载所有的部门信息放入到deptList</span><br>    List&lt;Dept&gt; all = deptService.findAll();<br>    request.setAttribute(<span class="hljs-string">&quot;deptList&quot;</span>,all);<br>    <span class="hljs-comment">//跳转页面</span><br>    request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/dept/add.jsp&quot;</span>).forward(request,response);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>4：同理找到DeptServlet中的toEdit方法，添加查询部门信息的代码</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toEdit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">//查询要修改的数据findById</span><br>    String id = request.getParameter(<span class="hljs-string">&quot;id&quot;</span>);<br>    <span class="hljs-comment">//        DeptService deptService = new DeptServiceImpl();</span><br>    Dept dept = deptService.findById(id);<br>    <span class="hljs-comment">//加载所有的部门信息放入到deptList</span><br>    List&lt;Dept&gt; all = deptService.findAll();<br>    request.setAttribute(<span class="hljs-string">&quot;deptList&quot;</span>,all);<br>    <span class="hljs-comment">//将数据加载到指定区域，供页面获取</span><br>    request.setAttribute(<span class="hljs-string">&quot;dept&quot;</span>,dept);<br>    <span class="hljs-comment">//跳转页面</span><br>    request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/dept/update.jsp&quot;</span>).forward(request,response);<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h2 id="5-用户模块"><a href="#5-用户模块" class="headerlink" title="5. 用户模块"></a>5. 用户模块</h2><p><img src="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B01/img/16.png" srcset="/img/loading.gif" lazyload></p>
<p>1：创建实体：com.itheima.domain.system.User</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String id;<br>    <span class="hljs-keyword">private</span> String email;       <span class="hljs-comment">//邮箱</span><br>    <span class="hljs-keyword">private</span> String userName;    <span class="hljs-comment">//姓名</span><br>    <span class="hljs-keyword">private</span> String password;    <span class="hljs-comment">//密码</span><br>    <span class="hljs-keyword">private</span> Long state;         <span class="hljs-comment">//状态</span><br>    <span class="hljs-keyword">private</span> String gender;      <span class="hljs-comment">//性别</span><br>    <span class="hljs-keyword">private</span> String telephone;   <span class="hljs-comment">//电话</span><br>    <span class="hljs-keyword">private</span> Date birthday;      <span class="hljs-comment">//出生年月</span><br>    <span class="hljs-keyword">private</span> Date joinDate;      <span class="hljs-comment">//入职时间</span><br>    <span class="hljs-keyword">private</span> String deptId;      <span class="hljs-comment">//部门id</span><br><br>    <span class="hljs-keyword">private</span> Dept dept;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">getDept</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> dept;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&#x27;&quot;</span> + id + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, email=&#x27;&quot;</span> + email + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, userName=&#x27;&quot;</span> + userName + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, password=&#x27;&quot;</span> + password + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, state=&quot;</span> + state +<br>                <span class="hljs-string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, telephone=&#x27;&quot;</span> + telephone + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, birthday=&quot;</span> + birthday +<br>                <span class="hljs-string">&quot;, joinDate=&quot;</span> + joinDate +<br>                <span class="hljs-string">&quot;, deptId=&#x27;&quot;</span> + deptId + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, dept=&quot;</span> + dept +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>	<span class="hljs-comment">//---------get/set方法略</span><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>2：创建dao接口：com.itheima.dao.system.UserDao</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">save</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delete</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">update</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-function">User <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span></span>;<br><br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>3：添加映射配置文件，从今日课程中找到：<code>dao层资源文件\配置文件\UserDao.xml</code>，拷贝到项目中<code>src/main/resources/com/itheima/dao/system/</code>目录下</p>
<p>4：创建业务层接口：com.itheima.service.system.UserService</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 添加</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 修改</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询单个</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 查询的条件（id）</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 查询的结果，单个对象</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">User <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询全部的数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 全部数据的列表对象</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page 页码</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> size 每页显示的数据总量</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">PageInfo <span class="hljs-title">findAll</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>5：创建业务层实现类：com.itheima.service.system.impl.UserServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(User user)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>            <span class="hljs-comment">//id使用UUID的生成策略来获取</span><br>            String id = UUID.randomUUID().toString();<br>            user.setId(id);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            userDao.save(user);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(User user)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            userDao.delete(user);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(User user)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            userDao.update(user);<br>            <span class="hljs-comment">//4.提交事务</span><br>            TransactionUtil.commit(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            TransactionUtil.rollback(sqlSession);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(String id)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            <span class="hljs-keyword">return</span> userDao.findById(id);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            <span class="hljs-keyword">return</span> userDao.findAll();<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> PageInfo <span class="hljs-title">findAll</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size)</span> </span>&#123;<br>        SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//1.获取SqlSession</span><br>            sqlSession = MapperFactory.getSqlSession();<br>            <span class="hljs-comment">//2.获取Dao</span><br>            UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>            <span class="hljs-comment">//3.调用Dao层操作</span><br>            PageHelper.startPage(page,size);<br>            List&lt;User&gt; all = userDao.findAll();<br>            PageInfo pageInfo = <span class="hljs-keyword">new</span> PageInfo(all);<br>            <span class="hljs-keyword">return</span> pageInfo;<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>            <span class="hljs-comment">//记录日志</span><br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                TransactionUtil.close(sqlSession);<br>            &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>6：创建servlet：com.itheima.web.controller.system.UserServlet</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// uri:/system/user?operation=list</span><br><span class="hljs-meta">@WebServlet(&quot;/system/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseServlet</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        String operation = request.getParameter(<span class="hljs-string">&quot;operation&quot;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;list&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.list(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toAdd&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toAdd(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;save&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.save(request, response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;toEdit&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.toEdit(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;edit&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.edit(request,response);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;delete&quot;</span>.equals(operation))&#123;<br>            <span class="hljs-keyword">this</span>.delete(request,response);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">list</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//进入列表页</span><br>        <span class="hljs-comment">//获取数据</span><br><span class="hljs-comment">//        UserService userService = new UserServiceImpl();</span><br>        <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> size = <span class="hljs-number">5</span>;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>)))&#123;<br>            page = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;page&quot;</span>));<br>        &#125;<br>        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>)))&#123;<br>            size = Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;size&quot;</span>));<br>        &#125;<br>        PageInfo all = userService.findAll(page, size);<br>        <span class="hljs-comment">//将数据保存到指定的位置</span><br>        request.setAttribute(<span class="hljs-string">&quot;page&quot;</span>,all);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/user/list.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toAdd</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/user/add.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        User user = BeanUtil.fillBean(request,User.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br>        userService.save(user);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/system/user?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toEdit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//查询要修改的数据findById</span><br>        String id = request.getParameter(<span class="hljs-string">&quot;id&quot;</span>);<br>        User user = userService.findById(id);<br>        <span class="hljs-comment">//将数据加载到指定区域，供页面获取</span><br>        request.setAttribute(<span class="hljs-string">&quot;user&quot;</span>,user);<br>        <span class="hljs-comment">//查询部门信息</span><br>        List&lt;Dept&gt; all = deptService.findAll();<br>        <span class="hljs-comment">//放入指定位置</span><br>        request.setAttribute(<span class="hljs-string">&quot;deptList&quot;</span>,all);<br>        <span class="hljs-comment">//跳转页面</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/user/update.jsp&quot;</span>).forward(request,response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">edit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        User user = BeanUtil.fillBean(request,User.class,<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class="hljs-comment">//调用业务层接口save</span><br>        userService.update(user);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/system/user?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">//将数据获取到，封装成一个对象</span><br>        User user = BeanUtil.fillBean(request,User.class);<br>        <span class="hljs-comment">//调用业务层接口save</span><br>        userService.delete(user);<br>        <span class="hljs-comment">//跳转回到页面list</span><br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/system/user?operation=list&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">this</span>.doGet(request,response);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>7：修改BaseServlet</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-keyword">protected</span> CompanyService companyService;<br>    <span class="hljs-keyword">protected</span> DeptService deptService;<br>    <span class="hljs-keyword">protected</span> UserService userService;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        companyService = <span class="hljs-keyword">new</span> CompanyServiceImpl();<br>        deptService = <span class="hljs-keyword">new</span> DeptServiceImpl();<br>        userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>8：创建<code>WEB-INF/pages/user</code>，然后从今日课程资料中找到<code>模块页面\user</code>下的所有页面，拷贝到该目录</p>
<p>注意：在此处希望大家是自行的拷贝之前dept的页面然后自己修改</p>
<p>9：新建功能时，去新建页面时需要查询部门信息，修改toAdd方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toAdd</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">//查询部门信息</span><br>    List&lt;Dept&gt; all = deptService.findAll();<br>    <span class="hljs-comment">//放入指定位置</span><br>    request.setAttribute(<span class="hljs-string">&quot;deptList&quot;</span>,all);<br>    <span class="hljs-comment">//跳转页面</span><br>    request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/user/add.jsp&quot;</span>).forward(request,response);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>10：新建用户时，用户的密码需要加密</p>
<p>从今日课程资料中找到：<code>service层资源文件/MD5Util.java</code>拷贝到项目utils包下</p>
<p>11：修改业务层代码，找到：save方法，给密码加密完成后再存入数据库</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(User user)</span> </span>&#123;<br>    SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">try</span>&#123;<br>        <span class="hljs-comment">//1.获取SqlSession</span><br>        sqlSession = MapperFactory.getSqlSession();<br>        <span class="hljs-comment">//2.获取Dao</span><br>        UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br>        <span class="hljs-comment">//id使用UUID的生成策略来获取</span><br>        String id = UUID.randomUUID().toString();<br>        user.setId(id);<br>        <span class="hljs-comment">//密码必须经过加密处理MD5加密</span><br>        user.setPassword(MD5Util.md5(user.getPassword()));<br>        <span class="hljs-comment">//3.调用Dao层操作</span><br>        userDao.save(user);<br>        <span class="hljs-comment">//4.提交事务</span><br>        TransactionUtil.commit(sqlSession);<br>    &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>        TransactionUtil.rollback(sqlSession);<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>        <span class="hljs-comment">//记录日志</span><br>    &#125;<span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            TransactionUtil.close(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>12：修改时，在去修改页面是，需要加载部门信息，找到UseServlet的toEdit方法，</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toEdit</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">//查询要修改的数据findById</span><br>    String id = request.getParameter(<span class="hljs-string">&quot;id&quot;</span>);<br>    User user = userService.findById(id);<br>    <span class="hljs-comment">//将数据加载到指定区域，供页面获取</span><br>    request.setAttribute(<span class="hljs-string">&quot;user&quot;</span>,user);<br>    <span class="hljs-comment">//查询部门信息</span><br>    List&lt;Dept&gt; all = deptService.findAll();<br>    <span class="hljs-comment">//放入指定位置</span><br>    request.setAttribute(<span class="hljs-string">&quot;deptList&quot;</span>,all);<br>    <span class="hljs-comment">//跳转页面</span><br>    request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/pages/system/user/update.jsp&quot;</span>).forward(request,response);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>13：真正在修改时，我们需要在业务层做一些处理，找到用户的业务层实现类，修改update方法</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(User user)</span> </span>&#123;<br>    SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">try</span>&#123;<br>        <span class="hljs-comment">//1.获取SqlSession</span><br>        sqlSession = MapperFactory.getSqlSession();<br>        <span class="hljs-comment">//2.获取Dao</span><br>        UserDao userDao = MapperFactory.getMapper(sqlSession,UserDao.class);<br><br>        <span class="hljs-comment">//方案1：读取现有库中的信息，覆盖现有的数据</span><br>        <span class="hljs-comment">//方案2：修改update语句</span><br>        System.out.println(user);<br>        <span class="hljs-comment">//3.调用Dao层操作</span><br>        userDao.update(user);<br>        <span class="hljs-comment">//4.提交事务</span><br>        TransactionUtil.commit(sqlSession);<br>    &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>        TransactionUtil.rollback(sqlSession);<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>        <span class="hljs-comment">//记录日志</span><br>    &#125;<span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            TransactionUtil.close(sqlSession);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>我们采用方案二：找到用户对应的xml配置文件：<code>UserDao.XML</code>，找到update标签，做出修改</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置全字段更新，当提供的数据为null时，数据库数据会被更新为null--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.itheima.domain.system.User&quot;</span>&gt;</span><br>    update ss_user<br>    set user_name = #&#123;userName,jdbcType=VARCHAR&#125;,<br>    state = #&#123;state,jdbcType=DECIMAL&#125;,<br>    gender = #&#123;gender,jdbcType=CHAR&#125;,<br>    telephone = #&#123;telephone,jdbcType=VARCHAR&#125;,<br>    dept_id = #&#123;deptId,jdbcType=VARCHAR&#125;<br>    where user_id = #&#123;id,jdbcType=VARCHAR&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></div></td></tr></table></figure>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/WEB%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/">WEB综合案例</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/WEB%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/">WEB综合案例</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/05/27/JavaWeb%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B02/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JavaWeb综合案例02</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/05/27/Maven%E5%9F%BA%E7%A1%80/">
                        <span class="hidden-mobile">Maven基础</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.lazyComments('valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#valine",
          app_id: "7FicXKczRMSUD3slGCpiLLto-gzGzoHsz",
          app_key: "L7N1wkygdm2UHsrq5DHTuMMk",
          placeholder: "说点什么",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: true,
          serverURLs: "https://7ficxkcz.lc-cn-n1-shared.com",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <a target="_blank" href="https://www.12377.cn/" rel="nofollow noopener noopener">中央网信办（国家互联网信息办公室）违法和不良信息举报中心</a>

  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        京ICP证123456号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12345678"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>京公网安备12345678号</span>
          </a>
        </span>
      
    
  </div>


  
  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  








  

  

  

  

  
    <!-- 51.la Analytics -->
    <script defer type="text/javascript" src="//js.users.51.la/21111747.js"></script>
  

  




  
<script src="/js/caidai.js"></script>
<script src="/js/dianjichuzi.js"></script>



<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>

  <script type="text/javascript" src="//js.users.51.la/21111747.js"></script>
</body>
</html>
